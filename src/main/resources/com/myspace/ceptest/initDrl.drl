package com.myspace.ceptest;
import fraud.analysis.demo.transaction.Transaction;
import fraud.analysis.demo.transaction.CEPFraud;

declare Transaction @role( event )  @timestamp( timestamp ) end

rule "tet"
when
accumulate ($b:Transaction(transactionType == "POS", merchantType=="A433998") over window:time(1m) from entry-point Reference;
$number: count($b),$list: collectList($b);$number > 2)
then
System.out.println("rule fired");
System.out.println("here");
CEPFraud cepFraud = new CEPFraud();
cepFraud.setTransaction(e1);
cepFraud.setFraudReason("fraud");
insert(cepFraud);
end

